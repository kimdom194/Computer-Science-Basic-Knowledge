- ### FTP

  - File Transfer Protocol
  - 사용자 - 클라이언트 프로그램를 이용하여 ftp 서버에 접속
    - 파일 다운로드
    - 파일 업로드
  - 로그인
    - 서버에 등록된 계정과 암호 필요
  - 익명(Anonymous) FTP
    - 공개 소프트웨어 배포 등을 위해 불특정 다수의 사용자가 이용할 수 있도록 익명 접속 허용
    - 계정 이름 : anonymous
    - 암호 : 관례상 접속한 사용자의 전자우편 주소
  - UNIX 환경에서는 ftp 클라이언트 프로그램 실행 후 기본 명령 사용
  - Windows 환경에서는 GUI 환경 지원

- ### FTP 구조 

  - 2개의 채널 존재
    - 제어 채널
      - FTP 프로토콜의 명령과 응답 전송
    - 데이터 채널
      - 복사하려는 파일의 내용 전송
  - 구성 요소
    - 사용자 인터페이스 모듈
    - 명령 송수신 모듈
    - 파일 송수신 모듈
    -  Well-known 포트
  - 요소별 기능
    - 사용자 인터페이스 모듈
      - 사용자 명령을 해석하여 명령 송수신 모듈에 전달
    - 명령 송수신 모듈
      - 제어 채널 설정 (클라이언트가 초기화)
      - 사용자 명령을 FTP 명령으로 전환하여 제어 채널로 전송
    - 파일 송수신 모듈
      - 파일 송수신 요구가 발생할 때마다 데이터 채널 설정 (서버가 초기화)
      - 데이터 채널을 통하여 파일 복사, 파일 목록 전송 기능 수행
  - Well-known 포트
    - 제어 채널 : TCP 21번
    - 데이터 채널 : TCP 20번
  - 제어 채널을 이용하여 FTP 명령과 응답을 전송
    - 3자리 응답 코드와 설명문으로 구성
    - 첫 번째 숫자가 2인 경우 : 성공
    - 첫 번째 숫자가 5인 경우 : 실패
    - 그외는 연속 동작 지원 용도
  - FTP 파일 송수신 절차
    - 클라이언트에서 데이터 채널 생성
    - PORT 명령
      - 생성한 포트 번호 전달
    - RETR/STOR (파일 송수신 명령) 전달
    - 데이터 채널 연결
    - 데이터 전송
    - 데이터 채널 종료
    - 서버에서 응답 코드 전송



- ### TFTP

  - Trivial File Transfer Protocol

  - 임의의 시스템이 원격시스템으로부터 부팅(booting) 코드를 다운로드할 때 사용하는 프로토콜

    - 자체적으로 하드디스크를 보유하지 못한 X-terminal과 같은 장치

  - 기존 FTP

    - TCP/IP 전체 프로토콜 스택
    - 2개의 채널(제어, 데이터)
    - 디렉토리/파일 관리

  - FTP 기능 대폭 축소하여 경량화

    - TCP대신 UDP사용
    - 복잡한 디렉토리, 파일 관리 기능 제거
    - 오직 하나의 파일 복사

  - UDP 69번 포트

  - ##### TFTP 메시지

    - RRQ
      - 읽기 요청
      - 인수 : 파일 이름과 모드(ASCII와 이진 파일 구분)
    - WRQ
      - 쓰기 요청
      - 인수 : 파일 이름과 모드
    - DATA
      - 클라이언트나 서버가 데이터 블록 전송
    - ACK
      - 클라이언트나 서버가 DATA에 대한 긍정 응답 전송
    - ERROR
      - 전송과정에서 오류가 발생했을 때

  - 세션의 설정과 읽기

    - UDP에는 연결 기능이 없으므로, 각 데이터 블록을 독립적으로 전송
    - RRQ를 보내면 세션 설정
    - DATA를 이용해 데이터를 전송하면 그대로 유지
    - 마지막 DATA는 512 바이트보다 작은 데이터 블록을 보내면 세션 해제
    - 파일을 보내는 서버는 DATA, 클라이언트는 ACK만 사용

  - 데이터 쓰기

    - WRQ를 보내면 세션 설정
    - 파일을 보내는 클라이언트는 DATA, 서버는 ACK만 사용

  - 데이터 전송

    - 데이터 블록 전송을 하나씩 처리하는 흐름 제어 방식
      - 데이터 도착 순서가 바뀔 수 없음
    - 데이터가 분실되는 경우
      - 송신 측의 타이머 이용
    - ACK가 분실되는 경우
      - 송신 측의 타이머 이용
      - ACK를 보낸 후 주어진 시간 내에 다음 데이터가 도착해야만 계속 진행
    - TFTP는 NAK를 지원하지 않음