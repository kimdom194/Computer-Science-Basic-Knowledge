### 자기 디스크

- 자화될 수 있는 물질로 코팅된 플라스틱이나 금속을 이용한 원형 평판으로 만들어진 저장장치 : 하드디스크, 디스크

- 구성 요소들

  - 원형 평판 : 실제 정보가 저장되는 장소, 다수의 트랙들로 구성
  - 헤드 : 전도성 코일을 통하여 표면을 자화 시킴으로 데이터를 저장하는 장치(단일 헤드 디스크를 많이 쓴다)
  - 디스크 팔 : 헤드를 이동시키는 장치
  - 구동장치 : 디스크의 팔을 이동하는 모터

- ### 디스크의 구조

  - 섹터 : 디스크에 한번 쓰거나 읽는 데이터의 크기
  - 섹터간 갭 : 섹터 구분을 위한 간격
  - 트랙간 갭 : 헤드가 잘못 정렬되거나 자장 간섭 때문에 발생하는 오류를 방지하기 위한 트랙들 사이의 간격

- ### 등각속도

  - 디스크가 일정한 속도로 회전하는 상태에서 트랙의 위치에 상관없이 데이터를 동일한 비율로 액세스하는 방식
  - 장점 : 디스크 읽기/쓰기 장치가 간단하다.
  - 단점 : 저장공간이 낭비된다.(바깥쪽 트랙이 안쪽보다 더 길지만, 저장하는 데이터는 같기 때문에)

- 디스크 형식화 작업(포맷)

  - 디스크의 구성을 검사하고, 그에 관한 정보와 트랙의 시작점, 섹터의 시작과 끝을 구분하기 위한 제어 정보 등을 디스크상의 특정 위치에 저장하는 과정
  - 섹터 크기 : 데이터 + 제어 정보

- 디스크의 이동성에 따른 분류(디스크 고정과 이동 차이)

  - 제거 불가능(하드 디스크)
  - 제거 가능(플로피 디스크)

- 디스크 면 수에 따른 분류

  - 양면(양면이 우세), 단면 

- 실린더 : 서로 다른 디스크 표면에 있지만 같은 반경에 위치하고 있어서, 디스크 팔을 움직이지 않고도 동시에 액세스 할 수 있는 트랙들의 집합(2개의 디스크에 양면 디스크를 쓴다면 4개 트랙의 집합)

- ### 디스크 액세스 시간

  - ##### 디스크 액세스 동작 순서

    1. 헤드를 해당 트랙으로 이동
    2. 원하는 섹터가 헤드아래로 회전되어 올 때까지 대기
    3. 데이터를 전송

  - 디스크 액세스 시간

    - 탐색시간(동작 1번) + 회전 지연 시간(동작 2번) + 데이터 전송 시간(동작 3번)



### RAID

- 디스크 배열(Disk Array) > RAID 출현의 배경

  - 디스크 여러개를 모아서 하나의 디스크처럼 사용(물리적으로는 여러개로 나누어져있으나 논리적으로 하나처럼 쓰는것)
  - 장점 : 데이터 분산 저장에 의한 동시 액세스 가능, 병렬 데이터 채널에 의한 데이터 전송 시간 단축
  - 단점 : 결함허용도 저하 > 문제가 발생했을 때(디스크 10개를 묶었을때 1개의 디스크보다 고장날 확률이 높아진다)

- 디스크 인터리빙

  - 데이터 블록들을 여러개의 디스크들로 이루어진 디스크 배열에 분산 저장하는 기술
  - 균등 분산 저장을 위해 라운드-로빈 방식을 사용(라운드 로빈 : 우선순위를 두지 않고, 순서대로 시간단위(Time Quantum)로 할당하는 방식)

  ### RAID 제안(레이드와 패리티비트가 중요)

  - 디스크 배열의 결함허용도를 높이기 위하여 탄생

  - 핵심 기술: 검사 디스크를 추가하여 오류 검출 및 복구 가능 추가

  - 복구 과정

    - 결함 발생 > 사용 중단 > 검사 디스크에 저장된 정보를 이용하여 원래의 재구성 > 여분의 디스크에 복구

  - RAID의 종류

    - ##### RAID-1

      ![1554155159449](C:\Users\TAE\AppData\Roaming\Typora\typora-user-images\1554155159449.png)

      - 디스크 반사 방식 이용 : 디스크에 저장된 모든 데이터들은 짝을 이루고있는 반사 디스크의 같은 위치에 복사
      - 장점 : 완전한 결함허용도 제공
      - 단점 : 가격이 높다
      - 용도 : 높은 신뢰도를 요구하는 결함허용시스템에 주로 사용

    - RAID-2

      ![1554155181572](C:\Users\TAE\AppData\Roaming\Typora\typora-user-images\1554155181572.png)

      - 비트 단위 인터리빙 방식 사용 : 데이터를 비트 단위로 분산 저장
      - 해밍 코드를 이용한 오류검출 및 정정  방식 사용

      ![1554155203747](C:\Users\TAE\AppData\Roaming\Typora\typora-user-images\1554155203747.png)

      - 단점 : 필요한 검사 디스크들의 수가 많아서 가격이 비싸다
      - 용도 : 오류가 많이 발생하는 환경에서 사용

    - RAID-3

      ![1554155223030](C:\Users\TAE\AppData\Roaming\Typora\typora-user-images\1554155223030.png)

      - 패리티 방식을 이용한 오류 검출 및 정정 방식 사용
      - 패리티 비트 p = XOR(XOR(XOR(b1, b2), B3), B4)  XOR의 아웃풋은 > 짝수는 0 홀수는 1
      - b2가 저장된 디스크에 결함이 발생한 경우의 데이터 복구
      - 장점 : 병령 데이터 읽기/쓰기 가능 > 디스크 액세스 속도 향상
      - 단점 : 쓰기 동작 때마다 패리티 비트 갱신 필요 > 시간 지연 발생

    - RAID-4

      - 블록 단위 인터리빙 방식을 사용

      - 디스크들의 동일한 위치에 있는 블록들에 대한 패리티 블록을 패리티 디스크에 저장

      - 단점 : 매번 쓰기 동작을 위해 패리티 디스크를 두번씩 액세스 > 병목 현상 발생

      - ##### 데이터 블록의 쓰기 과정

        - 두 번째 디스크에 저장된 블록 b2를 b2`로 갱신하는 경우 > 새로운 패리티 블록을 만들어야 한다. p' = XOR(XOR(XOR(b1, b2'), B3), B4) 
          - 세번째 디스크 읽기(b1, b3, b4 읽기)와 두번의 디스크 쓰기(새로운 데이터 및 패리티 쓰기) 동작이 필요 > overhead 발생(성능 저하)
          - 디스크 액세스 최소화 방법
            - p' = XOR(XOR(b2, b2'), p)
          - RAID 4는 디스크가 하나라 패리티비트 디스크가 고장시 큰일이 난다.

    - ##### RAID-5

      ![1554155290179](C:\Users\TAE\AppData\Roaming\Typora\typora-user-images\1554155290179.png)

      - RAID-4의 문제점을 보완하기 위해 패리티 블록을 라운드-로빈 방식으로 분산 저장
      - 장점 : 병목 현상 해소, 쓰기 동작들의 병렬 수행 가능

      - 문제점 : 작은 쓰기 문제
        - 어느 한 블록만 갱신하는 '작은 쓰기'의 경우에 4번의 디스크 액세스가 필요하기 때문에 성능이 저하됨
      - 용도 : 용량과 비용을 중요시하는 응용이나 큰 쓰기 요구가 많은 환경에 적합

    - RAID-6

      ![1554155305302](C:\Users\TAE\AppData\Roaming\Typora\typora-user-images\1554155305302.png)

      - 두개의 패리티를 따로 다른 디스크에 저장한다
      - 데이터를 디스크에 나누어 저장한다.
      - 따라서 N개의 데이터 디스크와 2개의 패리티 디스크가 필요하다.
      - 데이터 가용성이 높다.
        - 데이터가 손실 되려면 3개의 디스크가 동시에 불량이 있어야 된다.
        - 쓰기 문제가 심각해 진다

    - 중첩 RAID
      - 지금까지의 RAID 종류들을 두 개 이상 중첩하여 사용하는 경우
      - 데이터를 좀 더 안전하게 보관하면서 추가 되는 디스크 수를 절약 할 수 있다.



### 광 저장장치

- CD-ROM

  - 제조 방법 : 폴리카보네이트
  - 정보 저장 : 레이저를 이용하여 표면에 미세 피트들에 정보를 기록
  - 정보 검색 : 미세 피트들로부터 반사되는 빛의 강도에 의해 검색

  - 하나의 트랙이 나선형으로 연결되어있음
  - 동선속도 방식 이용 : 엑세스 할 섹터의 위치에 따라 디스크의 회전 속도가 달라지는 방식
    - 헤드의 속도가 항상 일정
    - 트랙 전체의 저장 밀도가 균일 > 공간 낭비 X
  - 액세스 방식 : 임의 액세스 방식
  - 저장 방식 : 트랙을 따라 순차적으로 저장
  - 자기 디스크와 비교한 장점
    - 대용량
    - 저렴한 가격으로 대량 복제 가능
  - 단점
    - 읽기만 가능하고 내용 불가능
    - 액세스 시간이 자기 디스크보다 훨씬 길다

- CD-R

  - 사용자가 데이터를 한번은 기록할 수 있는 CD-ROM
  - 열을 가하면 태워져 없어지기에 복구 불가능

- CD-RW
  - 여러번 쓰기가 가능한 컴팩트 디스크
  - 기본 구조는 CD-R과 동일
  - 가열하면 액체로 변환
- DVD
  - DVD 원판의 모습은 CD와 동일
  - 차이점 : 원판 2개를 겹쳐서 있음
  - 저장용량 증가, 속도 제어 복잡
- 블루레이 디스크
  - 고선명 영상 데이터 저장용 디스크
  - HD급 동영상 2시간 분량 저장 가능(25GByte)
  - BD의 종류
    - BD-ROM : 제조 과정에서만 기록
    - BD-R : 1번 기록
    - BD-RE : 여러번 기록

